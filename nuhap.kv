#:import ScrollEffect kivy.effects.scroll.ScrollEffect

<TelaManager>:
	Home:
		name: 'home'
		id: first
	Screen1:
		name: 'screen1'
		id: screen1
	Screen2:
		name: 'screen2'
		id: screen2
	TelaBar:
		id: telabar
		name: 'telabar'
	TelaEvento:
		id: telaevento
		name: 'telaevento'
	CriaEvento:
		name: 'criaevento'
		id: criaevento
	EventosIndie:
		name: 'eventosindie'
		id: eventosindie

<Home>:
	BoxLayout:
		orientation: 'vertical'
		padding: '10dp', '150dp', '10dp', '150dp'
		spacing: '40dp'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
				pos: self.pos
		Button:
			text: 'EVENTOS'
			background_normal: 'Image/BUTTONS/homebutton.png'
			background_down: 'Image/BUTTONS/homebuttondown.png'
			on_release: root.manager.current = 'screen2'
			on_release: root.manager.get_screen('screen2').clear()
			size_hint_y: None
			height: '50dp'
		Button:
			text: 'BARES E RESTAURANTES'
			background_normal: 'Image/BUTTONS/homebutton.png'
			background_down: 'Image/BUTTONS/homebuttondown.png'
			on_release: root.manager.current = 'screen1'
			on_release: root.manager.get_screen('screen1').clear()
			size_hint_y: None
			height: '50dp'
		Label:
			text: 'Contato: nuhapnew@gmail.com'
			color: 1, 1, 1, 1

<Screen1>:
	BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
				pos: self.pos
		ActionBar:
			background_image: ''
			background_color: 1, 1, 1, .2
			ActionView:
				ActionPrevious:
					with_previous: False
					title:  'Bares e Restaurantes'
					color: 0.941, 0.729, 0.078, 1
					app_icon: ''
				ActionButton:
					text: 'Eventos'
					background_down: 'Image/BUTTONS/actionbuttondown.png'
					on_release: root.manager.current = 'screen2'
					on_release: root.manager.get_screen('screen2').clear()
				ActionButton:
					text: 'Home'
					background_down: 'Image/BUTTONS/actionbuttondown.png'
					on_release: root.manager.current = 'home'
		BoxLayout:
			orientation: 'vertical'
			padding: '20dp', '15dp'
			size_hint_y: None
			height: '80dp'
			Label:
				text: 'O que tem pra hoje?'
				size_hint_y: None
				height: '50dp'
		Spinner:
			id: myspinner
			text: 'Selecione uma região'
			size_hint_y: None
			height: '50dp'
			color: 0, 0, 0, 1
			background_normal: ''
			background_down: ''
			background_color: 1, 1, 1, 1
			values: ['Criciúma', 'Tubarão', 'Laguna', 'Garopaba', 'Floripa']
			on_text: root.load(self.text)
		Label:
			size_hint_y: None
			height: '15dp'
		ScrollView:
			id: scroll1
			effect_cls: ScrollEffect
			BoxLayout:
				id: box1
				orientation: 'vertical'
				padding: 0, '40dp', 0, '60dp'
				spacing: '30dp'
				size_hint_y: None
				height: self.minimum_height

<Screen2>:
	BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
		ActionBar:
			background_image: ''
			background_color: 1, 1, 1, .2
			ActionView:
				ActionPrevious:
					with_previous: False
					title:  'Eventos'
					color: 0.941, 0.729, 0.078, 1
					app_icon: ''
				ActionButton:
					text: 'Bares e Restaurantes'
					background_down: 'Image/BUTTONS/actionbuttondown.png'
					on_release: root.manager.current = 'screen1'
					on_release: root.manager.get_screen('screen1').clear()
				ActionButton:
					text: 'Home'
					background_down: 'Image/BUTTONS/actionbuttondown.png'
					on_release: root.manager.current = 'home'
		BoxLayout:
			orientation: 'vertical'
			padding: '20dp', '15dp'
			size_hint_y: None
			height: '80dp'
			Button:
				text: 'EVENTOS INDEPENDENTES'
				color: 1, 1, 1, 1
				background_normal: 'Image/BUTTONS/homebutton.png'
				background_down: 'Image/BUTTONS/homebuttondown.png'
				on_release: root.manager.current = 'eventosindie'
				on_release: root.manager.get_screen('screen2').clear()
				on_release: root.manager.get_screen('eventosindie').clear()
				size_hint_y: None
				height: '50dp'
		Spinner:
			id: myspinner
			text: 'Selecione uma região'
			size_hint_y: None
			height: '50dp'
			color: 0, 0, 0, 1
			background_normal: ''
			background_down: ''
			background_color: 1, 1, 1, 1
			values: ['Criciúma', 'Tubarão', 'Laguna', 'Garopaba', 'Floripa']
			on_text: root.load(self.text)
		Label:
			size_hint_y: None
			height: '15dp'
		ScrollView:
			id: scroll1
			effect_cls: ScrollEffect
			BoxLayout:
				orientation: 'vertical'
				id: box1
				padding: 0, '40dp', 0, '60dp'
				spacing: '30dp'
				size_hint_y: None
				height: self.minimum_height

<TelaBar>:
	BoxLayout:
		orientation: 'vertical'
		spacing: '20dp'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
		ActionBar:
			background_image: ''
			background_color: 1, 1, 1, .2
			ActionView:
				ActionPrevious:
					id: title
					on_release: root.manager.current = 'screen1'
					color: 0.988, 0.553, 0.2, 1
					app_icon: ''
		BoxLayout:
			orientation: 'vertical'
			Label:
				id: lbcidade
				size_hint_y: .1
			Label:
				id: lbendereco
				size_hint_y: .1
			Label:
				id: lbcontato
				size_hint_y: .1
			Label:
				size_hint_y: .1
			ScrollView:
				BoxLayout:
					id: box1
					orientation: 'vertical'
					padding: 0, '20dp', 0, '40dp'
					spacing: '20dp'
					size_hint_y: None
					height: self.minimum_height

<TelaEvento>:
	BoxLayout:
		orientation: 'vertical'
		spacing: '20dp'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
		ActionBar:
			background_image: ''
			background_color: 1, 1, 1, .2
			ActionView:
				ActionPrevious:
					id: title
					on_release: root.manager.current = 'screen2'
					color: 0.988, 0.553, 0.2, 1
					app_icon: ''
		BoxLayout:
			orientation: 'vertical'
			Label:
				id: lbcidade
				size_hint_y: .1
			Label:
				id: lbendereco
				size_hint_y: .1

			ScrollView:
				BoxLayout:
					id: box1
					orientation: 'vertical'
					padding: '10dp', '20dp', '10dp', '20dp'
					spacing: '20dp'
					size_hint_y: None
					height: self.minimum_height
					Label:
						id: lbdescricao
						size: self.texture_size
						text_size: self.width, None
						padding_x: '10dp'
						padding_y: '20dp'
						halign: 'center'
						valign: 'bottom'

<CriaEvento>:
	BoxLayout:
		orientation: 'vertical'
		spacing: '20dp'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
				pos: self.pos
		ActionBar:
			background_image: ''
			background_color: 1, 1, 1, .2
			ActionView:
				ActionPrevious:
					on_release: root.manager.current = 'eventosindie'
					title:  'Criar Evento'
					color: 0.941, 0.729, 0.078, 1
					app_icon: ''
				ActionButton:
					text: 'Home'
					background_down: 'Image/BUTTONS/actionbuttondown.png'
					on_release: root.manager.current = 'home'
		Spinner:
			id: spinnerregiao
			text: 'Selecione uma região'
			size_hint_y: None
			height: '40dp'
			color: 0, 0, 0, 1
			background_normal: ''
			background_down: ''
			background_color: 1, 1, 1, 1
			values: ['Criciúma', 'Tubarão', 'Laguna', 'Garopaba', 'Floripa']
		TextInput:
			size_hint_y: .1
			hint_text: 'Título (inclua a cidade)'
			id: txtnome
			multiline: False
			input_filter: lambda text, from_undo: text[:70 - len(self.text)]
		BoxLayout:
			size_hint_y: .1
			spacing: '10dp'
			Spinner:
				size_hint_x: .3
				id: spinnerdia
				text: 'Dia'
				color: 0, 0, 0, 1
				background_normal: ''
				background_down: ''
				background_color: 1, 1, 1, 1
				values: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31']
			Spinner:
				id: spinnermes
				text: 'Mês'
				color: 0, 0, 0, 1
				background_normal: ''
				background_down: ''
				background_color: 1, 1, 1, 1
				values: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']
			TextInput:
				id: txtano
				size_hint_x: .5
				hint_text: 'Ano'
				text_size: self.size
				padding_y: '15dp'
				halign: 'center'
				valign: 'top'
		TextInput:
			id: txtdescricao
			size_hint_y: .4
			hint_text: 'Descrição (inclua o contato)'
			input_filter: lambda text, from_undo: text[:250 - len(self.text)]
		BoxLayout:
			orientation: 'vertical'
			id: box1
			size_hint_y: None
			height: '80dp'
			padding: '20dp', '20dp'
			Button:
				id: btenvia
				text: 'CRIAR'
				background_normal: 'Image/BUTTONS/homebutton.png'
				background_down: 'Image/BUTTONS/homebuttondown.png'
				on_release: root.cria_evento(root.ids.txtnome.text, root.ids.spinnerregiao.text, root.ids.spinnerdia.text, root.ids.spinnermes.text, root.ids.txtano.text, root.ids.txtdescricao.text)
				size_hint_y: None
				height: '50dp'

<EventosIndie>:
	BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgba: 0.098, 0.098, 0.098, 1
			Rectangle:
				size: self.size
				pos: self.pos
		BoxLayout:
			orientation: 'vertical'
			spacing: '30dp'
			ActionBar:
				background_image: ''
				background_color: 1, 1, 1, .2
				ActionView:
					ActionPrevious:
						background_down: 'Image/BUTTONS/actionbuttondown.png'
						on_release: root.manager.current = 'screen2'
						title:  'Eventos Independentes'
						color: 0.941, 0.729, 0.078, 1
						app_icon: ''
					ActionButton:
						text: 'Home'
						background_down: 'Image/BUTTONS/actionbuttondown.png'
						on_release: root.manager.current = 'home'
			Spinner:
				id: spinnerregiao
				text: 'Selecione uma região'
				size_hint_y: None
				height: '50dp'
				color: 0, 0, 0, 1
				background_normal: ''
				background_down: ''
				background_color: 1, 1, 1, 1
				values: ['Criciúma', 'Tubarão', 'Laguna', 'Garopaba', 'Floripa']
				on_text: root.manager.ids.eventosindie.load(self.text)
			ScrollView:
				id: scroll1
				effect_cls: ScrollEffect
				BoxLayout:
					id: box1
					orientation: 'vertical'
					padding: '10dp', '20dp', '10dp', '20dp'
					spacing: '20dp'
					size_hint_y: None
					height: self.minimum_height
		BoxLayout:
			orientation: 'vertical'
			size_hint_y: None
			height: '80dp'
			padding: '20dp', '20dp'
			Button:
				text: 'CRIAR UM EVENTO'
				background_normal: 'Image/BUTTONS/homebutton.png'
				background_down: 'Image/BUTTONS/homebuttondown.png'
				on_release: root.manager.current = 'criaevento'
				on_release: root.manager.get_screen('eventosindie').clear()
				size_hint_y: None
				height: '50dp'

<SpinnerOption>:
	background_normal: ''
	background_color: 1, 1, 1, 1
	background_down: ''
	color: 0, 0, 0, 1

<BoxFeedBar>:
	size_hint_y: None
	padding: '3dp', '3dp'
	height: '300dp'
	keep_ratio: False
	allow_stretch: True

<BoxFeedBar2>:
	size_hint_y: None
	padding: '3dp', '3dp'
	height: '300dp'
	keep_ratio: False
	allow_stretch: True

<BoxFeedEvento>:
	size_hint_y: None
	padding: '3dp', '3dp'
	height: '300dp'
	keep_ratio: False
	allow_stretch: True

<BoxFeedEventoIndie>:
	orientation: 'vertical'
	size_hint_y: None
	height: root.ids.descricao.height + dp(70)
	canvas:
		Color:
			rgba: 1, 1, 1, .2
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: 5, 5, 5, 5
	Label:
		id: descricao
		color: 1, 1, 1, 1
		size_hint_y: None
		size: self.texture_size
		text_size: self.width, None
		pos: self.parent.x, self.parent.y
		padding_x: '10dp'
		padding_y: '15dp'
		halign: 'center'
		valign: 'bottom'
		Label:
			id: titulo
			color: 0.941, 0.729, 0.078, 1
			bold: True
			pos: self.parent.x, self.parent.y + dp(60)
			size_hint: None, None
			size: self.parent.size
			text_size: self.size
			padding_x: '10dp'
			halign: 'center'
			valign: 'top'
		Label:
			id: data
			color: 0.941, 0.729, 0.078, 1
			pos: self.parent.x, self.parent.y + dp(15)
			size_hint: None, None
			size: self.parent.size
			text_size: self.size
			halign: 'center'
			valign: 'top'
